# 你不知道的JavaScript（上卷）

![](http://md.raizo.club/你不知道的JavaScript上卷封面.png)
- **作者：Kyle Simpson** 
---
- [你不知道的JavaScript（上卷）](#你不知道的javascript上卷)
  - [- **作者：Kyle Simpson**](#--作者kyle-simpson)
  - [引擎、编译器、作用域](#引擎编译器作用域)
    - [1. 引擎](#1-引擎)
      - [LHS查询和RHS查询](#lhs查询和rhs查询)
    - [2. 编译器](#2-编译器)
    - [3. 作用域](#3-作用域)
      - [作用域嵌套](#作用域嵌套)
---

## 引擎、编译器、作用域

### 1. 引擎
>从头到尾负责整个 JavaScript 程序的编译及执行过程

引擎在执行编译器的代码时，需要查找作用域中的变量，那么引擎是如何查找的呢？
- __编译器在编译过程的第二步中生成了代码__，引擎执行它时，会通过查找变量来判断它是否已声明过。<u>查找的过程由作用域进行协助</u>，但是引擎执行怎样的查找，会影响最终的查找结果。

#### LHS查询和RHS查询


|   |LHS查询|RHS查询|
|---|---|---|
|查询方式|当 **变量** 出现在 **赋值操作** 的 `左侧` 时进行 `LHS查询` ，试图找到变量的容器，从而对其进行赋值|当 **变量** 出现在 **赋值操作** 的 `右侧` 时进行 `RHS查询` ，可以理解为就是简单地查找某个变量的值|
|非严格模式下查询失败|全局作用域中就会创建一个具有该名称的变量，并将其返还给引擎|抛出`ReferenceError`异常|
|严格模式下查询失败|抛出`ReferenceError`异常|抛出`TypeError`异常|

**总结：**
- `LHS` 和 `RHS` 的含义是“赋值操作的左侧或右侧”并不一定意味着就是“=赋值操作符的左侧或右侧”。赋值操作还有其他几种形式，因此在概念上最好将其理解为“赋值操作的目标是谁（LHS）”以及“谁是赋值操作的源头（RHS）”。


### 2. 编译器
>负责语法分析及代码生成等


### 3. 作用域
>负责收集并维护由所有声明的标识符（变量）组成的一系列查询，并实施一套非常严格的规则，确定当前执行的代码对这些标识符的访问权限。
**作用域是根据名称查找变量的一套规则**


#### 作用域嵌套
>当一个块或函数嵌套在另一个块或函数中时，就发生了作用域的嵌套。因此，<u>在当前作用域中无法找到某个变量时</u>，引擎就会 **在外层嵌套的作用域** 中 **继续查找**，。<mark>直到找到该变量，或抵达最外层的作用域（也就是全局作用域）为止</mark>。

---
